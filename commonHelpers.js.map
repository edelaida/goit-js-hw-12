{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst formImg = document.querySelector('.form');\nconst pictures = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nconst modal = new SimpleLightbox('.gallery a', {\n  captionsData: \"alt\",\n  captions: true,\n  captionDelay: 250,\n  captionsPosition: 'bottom',\n});\n\nfunction fetchUsers(q) {\n  const API_KEY = '42086416-f15f3f0137ece30b1354f2d54';\n  const PARAMS = new URLSearchParams({\n    key: API_KEY,\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  const BASE_URL = 'https://pixabay.com/api';\n  const url = `${BASE_URL}/?${PARAMS}`;\n \n   return fetch(url).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    };\n    return response.json();\n  });\n }\n \nformImg.addEventListener('submit', subValue);\n\nfunction subValue(ent) {\n  ent.preventDefault();\n  loader.classList.remove('is-hidden');\n  pictures.innerHTML = '';\n  const serchValue = ent.currentTarget.elements.title.value.trim();  \n  fetchUsers(serchValue).then(response => {\n    if (response.hits.length === 0) {\n      iziToast.error({\n        position: 'center',\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n    pictures.innerHTML = markUp(response.hits);\n    modal.refresh();\n  })\n  .catch(error => console.log(error))\n  .finally(() => {\n    loader.classList.add('is-hidden'); \n  })\n}\n\nfunction markUp(arr) {\n  return arr.map(({webformatURL, largeImageURL, tags, likes, comments, downloads}) => {\n    return `\n <li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" \n    alt=\"${tags}\"/></a>\n    <ul class=\"gallery-info\">\n          <li class=\"info-item\">\n            <h4 class=\"info-title\">likes</h4>\n            <p class=\"info-rez\">${likes}</p> \n          </li>\n          <li class=\"info-item\">\n            <h4 class=\"info-title\">comments</h4>\n            <p class=\"info-rez\">${comments}</p> \n           </li>\n          <li class=\"info-item\">\n            <h4 class=\"info-title\">downloads</h4>\n            <p class=\"info-rez\">${downloads}</p> \n           </li>\n        </ul> \n  </li>`\n})\n .join(\"\"); \n}\n "],"names":["formImg","pictures","loader","modal","SimpleLightbox","fetchUsers","q","API_KEY","url","response","subValue","ent","serchValue","iziToast","markUp","error","arr","webformatURL","largeImageURL","tags","likes","comments","downloads"],"mappings":"6vBAKA,MAAMA,EAAU,SAAS,cAAc,OAAO,EACxCC,EAAW,SAAS,cAAc,UAAU,EAC5CC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAQ,IAAIC,EAAe,aAAc,CAC7C,aAAc,MACd,SAAU,GACV,aAAc,IACd,iBAAkB,QACpB,CAAC,EAED,SAASC,EAAWC,EAAG,CACrB,MAAMC,EAAU,qCAUVC,EAAM,4BATG,IAAI,gBAAgB,CACjC,IAAKD,EACL,EAAAD,EACA,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,IAKA,OAAO,MAAME,CAAG,EAAE,KAAKC,GAAY,CAClC,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACD,CAEFT,EAAQ,iBAAiB,SAAUU,CAAQ,EAE3C,SAASA,EAASC,EAAK,CACrBA,EAAI,eAAc,EAClBT,EAAO,UAAU,OAAO,WAAW,EACnCD,EAAS,UAAY,GACrB,MAAMW,EAAaD,EAAI,cAAc,SAAS,MAAM,MAAM,OAC1DN,EAAWO,CAAU,EAAE,KAAKH,GAAY,CAClCA,EAAS,KAAK,SAAW,GAC3BI,EAAS,MAAM,CACb,SAAU,SACV,MAAO,QACP,QAAS,0EACjB,CAAO,EAEHZ,EAAS,UAAYa,EAAOL,EAAS,IAAI,EACzCN,EAAM,QAAO,CACjB,CAAG,EACA,MAAMY,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAM,CACbb,EAAO,UAAU,IAAI,WAAW,CACpC,CAAG,CACH,CAEA,SAASY,EAAOE,EAAK,CACnB,OAAOA,EAAI,IAAI,CAAC,CAAC,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IACrE;AAAA;AAAA,kCAEuBJ;AAAA,sCACID;AAAA,WAC3BE;AAAA;AAAA;AAAA;AAAA,kCAIuBC;AAAA;AAAA;AAAA;AAAA,kCAIAC;AAAA;AAAA;AAAA;AAAA,kCAIAC;AAAA;AAAA;AAAA,QAIjC,EACC,KAAK,EAAE,CACT"}