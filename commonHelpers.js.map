{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\nconst formImg = document.querySelector('.form');\nconst pictures = document.querySelector('.gallery');\nconst btnLoadMore = document.querySelector('.js-btn-load')\nconst loadElem = document.querySelector('.js-loader');\n\nconst modal = new SimpleLightbox('.gallery a', {\n  captionsData: \"alt\",\n  captions: true,\n  captionDelay: 250,\n  captionsPosition: 'bottom',\n});\n\nlet page = 1;\nlet limit = 30;\nlet totalResults = 100;\nlet maxPage = 0;\nlet serchValue = '';\n\nasync function fetchUsers(q) {\n  const API_KEY = '42086416-f15f3f0137ece30b1354f2d54';\n  const PARAMS = new URLSearchParams({\n    key: API_KEY,\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n      per_page: limit,\n  });\n  const BASE_URL = 'https://pixabay.com/api';\n  const url = `${BASE_URL}/?${PARAMS}`; \n    const response = await axios.get(url, PARAMS);    \n    return response.data.hits;   \n }\n \nformImg.addEventListener('submit', subValue);\nbtnLoadMore.addEventListener('click', onLoadMore);\n\nasync function subValue(ent) {\n    ent.preventDefault();   \n    pictures.innerHTML = '';    \n        \n  try {\n       serchValue = ent.currentTarget.elements.title.value.trim();\n    const arr = await fetchUsers(serchValue)\n       pictures.innerHTML = markUp(arr);\n        modal.refresh();\n        hideLoader();\n    changeBtnStatus();\n    ent.target.reset();\n       \n    } catch(error) {\n        iziToast.error({\n            position: 'center',\n            title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n        })\n    }      \n}\n\nasync function onLoadMore() {\n  page += 1;\n  showLoader();\n  const arr = await fetchUsers(serchValue)\n  pictures.insertAdjacentHTML('beforeend', markUp(arr));\n  modal.refresh();\n    hideLoader();\n  changeBtnStatus();\n}\n\nfunction changeBtnStatus() {\n   maxPage = Math.ceil(totalResults / limit);\n    btnLoadMore.disabled = page >= maxPage;\n}\n\nfunction showLoader() {\n  loadElem.classList.remove('is-hidden');\n}\nfunction hideLoader() {\n  loadElem.classList.add('is-hidden');\n}\n\nfunction markUp(arr) {\n  return arr.map(({webformatURL, largeImageURL, tags, likes, comments, downloads}) => {\n    return `\n <li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" \n    alt=\"${tags}\"/></a>\n    <ul class=\"gallery-info\">\n          <li class=\"info-item\">\n            <h4 class=\"info-title\">likes</h4>\n            <p class=\"info-rez\">${likes}</p> \n          </li>\n          <li class=\"info-item\">\n            <h4 class=\"info-title\">comments</h4>\n            <p class=\"info-rez\">${comments}</p> \n           </li>\n          <li class=\"info-item\">\n            <h4 class=\"info-title\">downloads</h4>\n            <p class=\"info-rez\">${downloads}</p> \n           </li>\n        </ul> \n  </li>`\n})\n .join(\"\"); \n}\n\n"],"names":["formImg","pictures","btnLoadMore","loadElem","modal","SimpleLightbox","page","limit","totalResults","maxPage","serchValue","fetchUsers","q","API_KEY","PARAMS","url","axios","subValue","onLoadMore","ent","arr","markUp","hideLoader","changeBtnStatus","iziToast","showLoader","webformatURL","largeImageURL","tags","likes","comments","downloads"],"mappings":"owBAMA,MAAMA,EAAU,SAAS,cAAc,OAAO,EACxCC,EAAW,SAAS,cAAc,UAAU,EAC5CC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAW,SAAS,cAAc,YAAY,EAE9CC,EAAQ,IAAIC,EAAe,aAAc,CAC7C,aAAc,MACd,SAAU,GACV,aAAc,IACd,iBAAkB,QACpB,CAAC,EAED,IAAIC,EAAO,EACPC,EAAQ,GACRC,EAAe,IACfC,EAAU,EACVC,EAAa,GAEjB,eAAeC,EAAWC,EAAG,CAC3B,MAAMC,EAAU,qCACVC,EAAS,IAAI,gBAAgB,CACjC,IAAKD,EACL,EAAAD,EACA,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMN,EACJ,SAAUC,CAChB,CAAG,EAEKQ,EAAM,4BAAgBD,IAE1B,OADiB,MAAME,EAAM,IAAID,EAAKD,CAAM,GAC5B,KAAK,IACvB,CAEFd,EAAQ,iBAAiB,SAAUiB,CAAQ,EAC3Cf,EAAY,iBAAiB,QAASgB,CAAU,EAEhD,eAAeD,EAASE,EAAK,CACzBA,EAAI,eAAc,EAClBlB,EAAS,UAAY,GAEvB,GAAI,CACCS,EAAaS,EAAI,cAAc,SAAS,MAAM,MAAM,OACvD,MAAMC,EAAM,MAAMT,EAAWD,CAAU,EACpCT,EAAS,UAAYoB,EAAOD,CAAG,EAC9BhB,EAAM,QAAO,EACbkB,IACJC,IACAJ,EAAI,OAAO,OAEV,MAAC,CACEK,EAAS,MAAM,CACX,SAAU,SACV,MAAO,QACP,QAAS,0EACrB,CAAS,CACJ,CACL,CAEA,eAAeN,GAAa,CAC1BZ,GAAQ,EACRmB,IACA,MAAML,EAAM,MAAMT,EAAWD,CAAU,EACvCT,EAAS,mBAAmB,YAAaoB,EAAOD,CAAG,CAAC,EACpDhB,EAAM,QAAO,EACXkB,IACFC,GACF,CAEA,SAASA,GAAkB,CACxBd,EAAU,KAAK,KAAKD,EAAeD,CAAK,EACvCL,EAAY,SAAWI,GAAQG,CACnC,CAEA,SAASgB,GAAa,CACpBtB,EAAS,UAAU,OAAO,WAAW,CACvC,CACA,SAASmB,GAAa,CACpBnB,EAAS,UAAU,IAAI,WAAW,CACpC,CAEA,SAASkB,EAAOD,EAAK,CACnB,OAAOA,EAAI,IAAI,CAAC,CAAC,aAAAM,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IACrE;AAAA;AAAA,kCAEuBJ;AAAA,sCACID;AAAA,WAC3BE;AAAA;AAAA;AAAA;AAAA,kCAIuBC;AAAA;AAAA;AAAA;AAAA,kCAIAC;AAAA;AAAA;AAAA;AAAA,kCAIAC;AAAA;AAAA;AAAA,QAIjC,EACC,KAAK,EAAE,CACT"}